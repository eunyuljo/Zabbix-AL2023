<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS CloudWatch Zabbix ëª¨ë‹ˆí„°ë§ ê°€ì´ë“œ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
            line-height: 1.6;
        }
        h1 {
            color: #2c5282;
            border-bottom: 2px solid #2c5282;
            padding-bottom: 5px;
        }
        h2 {
            color: #2d3748;
            margin-top: 25px;
        }
        h3 {
            color: #4a5568;
            margin-top: 20px;
        }
        .service-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        .service-item {
            background: #fff;
            padding: 12px;
            border-left: 3px solid #3182ce;
            border-radius: 3px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .macro-table {
            background: #fff;
            border-collapse: collapse;
            width: 100%;
            margin: 10px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .macro-table th, .macro-table td {
            border: 1px solid #e2e8f0;
            padding: 12px;
            text-align: left;
        }
        .macro-table th {
            background: #edf2f7;
            font-weight: bold;
        }
        .code {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            overflow-x: auto;
        }
        .warning {
            background: #fff5cd;
            border-left: 4px solid #d69e2e;
            padding: 15px;
            margin: 10px 0;
            border-radius: 3px;
        }
        .step {
            background: #fff;
            padding: 20px;
            margin: 15px 0;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .metric-section {
            background: #f7fafc;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>ğŸš€ AWS CloudWatch Zabbix ëª¨ë‹ˆí„°ë§ ê°€ì´ë“œ</h1>

    <h2>ğŸ“Š ì§€ì›í•˜ëŠ” AWS ì„œë¹„ìŠ¤ (19ê°œ)</h2>
    <div class="service-list">
        <div class="service-item"><strong>EC2</strong><br>CPU, ë„¤íŠ¸ì›Œí¬, ë””ìŠ¤í¬, ìƒíƒœì²´í¬</div>
        <div class="service-item"><strong>ALB</strong><br>ë¡œë“œë°¸ëŸ°ì„œ, íƒ€ê²Ÿê·¸ë£¹ ë©”íŠ¸ë¦­</div>
        <div class="service-item"><strong>NLB</strong><br>ë„¤íŠ¸ì›Œí¬ ë¡œë“œë°¸ëŸ°ì„œ</div>
        <div class="service-item"><strong>RDS</strong><br>ë°ì´í„°ë² ì´ìŠ¤ ì¸ìŠ¤í„´ìŠ¤</div>
        <div class="service-item"><strong>Aurora</strong><br>í´ëŸ¬ìŠ¤í„°, ì¸ìŠ¤í„´ìŠ¤</div>
        <div class="service-item"><strong>Lambda</strong><br>ì„œë²„ë¦¬ìŠ¤ í•¨ìˆ˜</div>
        <div class="service-item"><strong>S3</strong><br>ë²„í‚·, ìš”ì²­ ë©”íŠ¸ë¦­</div>
        <div class="service-item"><strong>DynamoDB</strong><br>í…Œì´ë¸”, ì¸ë±ìŠ¤</div>
        <div class="service-item"><strong>ElastiCache</strong><br>Redis/Memcached</div>
        <div class="service-item"><strong>ECS</strong><br>ì»¨í…Œì´ë„ˆ í´ëŸ¬ìŠ¤í„°, ì„œë¹„ìŠ¤</div>
        <div class="service-item"><strong>EKS</strong><br>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°</div>
        <div class="service-item"><strong>CloudFront</strong><br>CDN ë°°í¬</div>
        <div class="service-item"><strong>API Gateway</strong><br>API ì—”ë“œí¬ì¸íŠ¸</div>
        <div class="service-item"><strong>EFS</strong><br>íŒŒì¼ ì‹œìŠ¤í…œ</div>
        <div class="service-item"><strong>NAT Gateway</strong><br>ë„¤íŠ¸ì›Œí¬ ê²Œì´íŠ¸ì›¨ì´</div>
        <div class="service-item"><strong>VPN S2S</strong><br>Site-to-Site VPN</div>
        <div class="service-item"><strong>Direct Connect</strong><br>ì „ìš©ì„  ì—°ê²°</div>
        <div class="service-item"><strong>Transit Gateway</strong><br>ë„¤íŠ¸ì›Œí¬ í—ˆë¸Œ</div>
        <div class="service-item"><strong>AWS Backup</strong><br>ë°±ì—… ì„œë¹„ìŠ¤</div>
    </div>

    <div class="step">
        <h2>âš™ï¸ 1ë‹¨ê³„: AWS ê³„ì • ì„¤ì •</h2>
        <table class="macro-table">
            <tr><th>ë§¤í¬ë¡œ</th><th>ì„¤ëª…</th><th>ì˜ˆì‹œ ê°’</th></tr>
            <tr><td>{$ACCOUNT_ID}</td><td>AWS ê³„ì • ID</td><td>123456789012</td></tr>
            <tr><td>{$REGION}</td><td>AWS ë¦¬ì „</td><td>ap-northeast-2</td></tr>
            <tr><td>{$ROLE_ARN}</td><td>IAM ì—­í•  ARN</td><td>arn:aws:iam::123456789012:role/ZabbixMonitoringRole</td></tr>
        </table>
    </div>

    <div class="step">
        <h2>ğŸ”§ 2ë‹¨ê³„: í…œí”Œë¦¿ Import</h2>
        <div class="code">Configuration â†’ Templates â†’ Import<br>â†’ XML íŒŒì¼ ì—…ë¡œë“œ â†’ Import</div>
    </div>

    <div class="step">
        <h2>ğŸ–¥ï¸ 3ë‹¨ê³„: í˜¸ìŠ¤íŠ¸ ìƒì„± ë° ì„¤ì •</h2>
        <div class="code">Configuration â†’ Hosts â†’ Create host<br><br>1. Host name: AWS-EC2-Production<br>2. Templates íƒ­: í•´ë‹¹ AWS ì„œë¹„ìŠ¤ í…œí”Œë¦¿ ì„ íƒ<br>3. Macros íƒ­: ì„œë¹„ìŠ¤ë³„ ID ì…ë ¥<br><br>ì£¼ìš” ë§¤í¬ë¡œë“¤:<br>â€¢ EC2: {$INSTANCE_ID} = i-0123456789abcdef0<br>â€¢ ALB: {$ALB_NAME} = my-alb-name<br>â€¢ RDS: {$DB_INSTANCE_ID} = my-db-instance<br>â€¢ Lambda: {$FUNCTION_NAME} = my-lambda-function<br>â€¢ S3: {$BUCKET_NAME} = my-s3-bucket</div>
    </div>

    <div class="step">
        <h2>ğŸ“ˆ 4ë‹¨ê³„: ì£¼ìš” ë©”íŠ¸ë¦­ í™•ì¸</h2>

        <div class="metric-section">
            <h3>EC2 ì¸ìŠ¤í„´ìŠ¤</h3>
            <ul>
                <li>CPU ì‚¬ìš©ë¥  (80% ê²½ê³ , 90% ìœ„í—˜)</li>
                <li>ë„¤íŠ¸ì›Œí¬ In/Out</li>
                <li>ë””ìŠ¤í¬ Read/Write</li>
                <li>ìƒíƒœ ì²´í¬ ì‹¤íŒ¨</li>
            </ul>
        </div>

        <div class="metric-section">
            <h3>RDS/Aurora</h3>
            <ul>
                <li>CPU ì‚¬ìš©ë¥ , ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ìˆ˜</li>
                <li>ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰, ìŠ¤í† ë¦¬ì§€ ì—¬ìœ ê³µê°„</li>
                <li>ì½ê¸°/ì“°ê¸° ì§€ì—°ì‹œê°„ ë° IOPS</li>
                <li>Aurora: ë³µì œ ì§€ì—°ì‹œê°„</li>
            </ul>
        </div>

        <div class="metric-section">
            <h3>Lambda í•¨ìˆ˜</h3>
            <ul>
                <li>ì‹¤í–‰ ì‹œê°„ (30ì´ˆ ì´ˆê³¼ ê²½ê³ )</li>
                <li>í˜¸ì¶œ íšŸìˆ˜, ì—ëŸ¬ ë°œìƒ íšŸìˆ˜</li>
                <li>ìŠ¤ë¡œí‹€ë§, Dead Letter Queue ì—ëŸ¬</li>
                <li>ë™ì‹œ ì‹¤í–‰ ìˆ˜</li>
            </ul>
        </div>

        <div class="metric-section">
            <h3>ElastiCache</h3>
            <ul>
                <li>ìºì‹œ íˆíŠ¸/ë¯¸ìŠ¤ìœ¨ (20% ë¯¸ìŠ¤ìœ¨ ê²½ê³ )</li>
                <li>CPU ì‚¬ìš©ë¥ , ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ </li>
                <li>ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½, í´ë¼ì´ì–¸íŠ¸ ì—°ê²°ìˆ˜</li>
                <li>Redis: ë³µì œ ì§€ì—°ì‹œê°„</li>
            </ul>
        </div>
    </div>

    <div class="warning">
        <strong>âš ï¸ ì¤‘ìš” ì‚¬í•­</strong><br>
        â€¢ ê° í˜¸ìŠ¤íŠ¸ë§ˆë‹¤ í•´ë‹¹ ì„œë¹„ìŠ¤ì˜ ì •í™•í•œ ë¦¬ì†ŒìŠ¤ IDë¥¼ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤<br>
        â€¢ CloudFrontëŠ” us-east-1 ë¦¬ì „ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤ (ê¸€ë¡œë²Œ ì„œë¹„ìŠ¤)<br>
        â€¢ IAM ì—­í• ì— CloudWatch ì½ê¸° ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤
    </div>

    <div class="step">
        <h2>ğŸ” 5ë‹¨ê³„: ë¬¸ì œ í•´ê²°</h2>
        <h3>ë©”íŠ¸ë¦­ì´ ìˆ˜ì§‘ë˜ì§€ ì•ŠëŠ” ê²½ìš°:</h3>
        <ol>
            <li><strong>AWS IAM ê¶Œí•œ í™•ì¸</strong> - CloudWatch ì½ê¸° ê¶Œí•œ</li>
            <li><strong>ë§¤í¬ë¡œ ê°’ í™•ì¸</strong> - Account ID, Region, Resource ID</li>
            <li><strong>External script ê¶Œí•œ í™•ì¸</strong> - zabbix ì‚¬ìš©ì ì‹¤í–‰ ê¶Œí•œ</li>
            <li><strong>Zabbix server ë¡œê·¸ í™•ì¸</strong></li>
        </ol>

        <div class="code">
# ë¡œê·¸ í™•ì¸<br>
tail -f /var/log/zabbix/zabbix_server.log<br><br>

# External script ìˆ˜ë™ ì‹¤í–‰ í…ŒìŠ¤íŠ¸<br>
sudo -u zabbix /usr/lib/zabbix/externalscripts/aws-cloudwatch-metric \<br>
&nbsp;&nbsp;123456789012 \<br>
&nbsp;&nbsp;ap-northeast-2 \<br>
&nbsp;&nbsp;AWS/EC2 \<br>
&nbsp;&nbsp;CPUUtilization \<br>
&nbsp;&nbsp;Average \<br>
&nbsp;&nbsp;"Name=InstanceId,Value=i-0123456789abcdef0" \<br>
&nbsp;&nbsp;"arn:aws:iam::123456789012:role/ZabbixMonitoringRole"
        </div>
    </div>

    <p style="text-align:center;margin-top:30px;color:#718096;">
        ğŸ“š <strong>Megazone AWS CloudWatch Templates</strong><br>
        19ê°œ AWS ì„œë¹„ìŠ¤ ì¢…í•© ëª¨ë‹ˆí„°ë§ ì†”ë£¨ì…˜
    </p>
</body>
</html>